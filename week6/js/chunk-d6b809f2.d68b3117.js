(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d6b809f2"],{1799:function(t,a,i){"use strict";var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"page-wrap",attrs:{id:"pagination"}},[i("button",{staticClass:"page",attrs:{id:"prev"},on:{click:function(a){return t.changePage("m")}}},[t._v("«")]),t._l(t.pagination.total_pages,(function(a){return i("button",{key:a,staticClass:"page",class:{curpage:a===t.pagination.current_page},on:{click:function(i){return t.goToPage(a)}}},[t._v(t._s(a))])})),i("button",{staticClass:"page",attrs:{id:"next"},on:{click:function(a){return t.changePage("p")}}},[t._v("»")])],2)},e=[],s={name:"pagination",props:{pagination:Object},template:"#pagination",methods:{changePage:function(t){var a=this.pagination.current_page,i=this.pagination.total_pages;"p"===t?a<i&&this.$emit("update:pagination",this.pagination.current_page+=1):"m"===t&&a>1&&this.$emit("update:pagination",this.pagination.current_page-=1)},goToPage:function(t){this.$emit("update:pagination",this.pagination.current_page=t)}}},c=s,o=(i("ba16"),i("2877")),r=Object(o["a"])(c,n,e,!1,null,"2a9c838b",null);a["a"]=r.exports},"1b61":function(t,a,i){},"2afb":function(t,a,i){"use strict";var n=i("4b33"),e=i.n(n);e.a},"4b33":function(t,a,i){},9385:function(t,a,i){},"958b":function(t,a,i){"use strict";var n=i("9385"),e=i.n(n);e.a},ba16:function(t,a,i){"use strict";var n=i("eed0"),e=i.n(n);e.a},c975:function(t,a,i){"use strict";var n=i("23e7"),e=i("4d64").indexOf,s=i("a640"),c=i("ae40"),o=[].indexOf,r=!!o&&1/[1].indexOf(1,-0)<0,u=s("indexOf"),d=c("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:r||!u||!d},{indexOf:function(t){return r?o.apply(this,arguments)||0:e(this,t,arguments.length>1?arguments[1]:void 0)}})},d81d:function(t,a,i){"use strict";var n=i("23e7"),e=i("b727").map,s=i("1dde"),c=i("ae40"),o=s("map"),r=c("map");n({target:"Array",proto:!0,forced:!o||!r},{map:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}})},e6dc:function(t,a,i){"use strict";i.r(a);var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"productPage",attrs:{id:"productPage"}},[i("categoryList",{class:{sticky:t.sticky}}),i("productList",{class:{sticky:t.sticky}})],1)},e=[],s=i("5530"),c=i("2f62"),o=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"category",attrs:{id:"category"}},[i("div",{staticClass:"category-container"},[i("ul",{staticClass:"category-list"},[i("li",[i("button",{on:{click:function(a){return t.setCategory("")}}},[t._v("全部商品")])]),i("li",[i("button",{on:{click:function(a){return t.setCategory("bed")}}},[t._v("床架／床墊")])]),i("li",[i("button",{on:{click:function(a){return t.setCategory("chair")}}},[t._v("椅子／沙發")])]),i("li",[i("button",{on:{click:function(a){return t.setCategory("case")}}},[t._v("櫃子／桌子")])]),i("li",[i("button",{on:{click:function(a){return t.setCategory("curtain")}}},[t._v("地毯／窗簾")])])])])])},r=[],u={methods:Object(s["a"])({},Object(c["b"])(["setCategory"]))},d=u,p=(i("ff7c"),i("2877")),l=Object(p["a"])(d,o,r,!1,null,"6391bb2c",null),g=l.exports,f=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"product-list",attrs:{id:"product-list"}},[i("div",{staticClass:"container"},[i("div",{staticClass:"item-list"},t._l(t.showProducts,(function(a,n){return i("div",{key:n,staticClass:"item",attrs:{"data-id":a.id}},[i("div",{staticClass:"cat"},[t._v(t._s(a.category))]),i("div",{staticClass:"pic",style:{backgroundImage:"url("+a.imageUrl[0]+")"}}),i("div",{staticClass:"detail"},[i("div",{staticClass:"title",attrs:{title:a.title}},[t._v(t._s(t._f("hideText")(a.title)))]),i("div",{staticClass:"descript"},[t._v(t._s(t._f("hideContent")(a.content)))]),i("router-link",{staticClass:"descript-link",attrs:{to:"/product/"+a.id}},[t._v("查看更多 »")]),a.price?i("div",{staticClass:"price"},[t._v(t._s(t._f("cash")(a.price))),i("span",{class:{strike:a.price}},[t._v(t._s(t._f("cash")(a.origin_price)))])]):t._e(),i("div",{staticClass:"action"},[i("div",{staticClass:"num-control"},[i("button",{staticClass:"num-minus",on:{click:function(a){return t.countQuantity(n,"m")}}},[t._v("−")]),i("input",{staticClass:"num-input",attrs:{type:"number"},domProps:{value:a.quantity}}),i("button",{staticClass:"num-plus",on:{click:function(a){return t.countQuantity(n,"p")}}},[t._v("+")])]),i("button",{staticClass:"addCart",on:{click:function(i){return t.addToCart(n,a.id,a.quantity)}}},[i("div",{staticClass:"txt",class:{hide:a.isLoading}},[t._v("加入購物車")]),i("font-awesome-icon",{staticClass:"loading fa-spin",class:{show:a.isLoading},attrs:{icon:["fas","spinner"]}})],1)])],1)])})),0),t.pagination.current_page?[i("pagination",{attrs:{pagination:t.pagination}})]:t._e(),i("router-link",{staticClass:"shop-cart",attrs:{to:"/shopcart"}},[i("div",{staticClass:"shop-container"},[t.shopcart.quantity?i("div",{staticClass:"cart-count"},[t._v(t._s(t.shopcart.quantity))]):t._e(),i("font-awesome-icon",{attrs:{icon:"shopping-cart"}}),i("div",{staticClass:"txt"},[t._v("購物車")])],1)])],2)])},h=[],v=(i("4de4"),i("c975"),i("d81d"),i("2909")),b=i("1799"),_=i("2803"),y={components:{productCategories:g,pagination:b["a"]},data:function(){return{id:null,pageOpen:!1,shopcart:{quantity:null},pagination:{}}},created:function(){this.getData(),this.getShopcartQuantity()},watch:{"pagination.current_page":{handler:function(){var t=this,a=this.pagination.current_page,i=this.$loading.show();Object(_["i"])(a).then((function(a){t.setProducts(Object(v["a"])(a.data.data).map((function(t){var a=t;return a.quantity=1,a.isLoading=!1,a}))),i.hide()}))}}},computed:Object(s["a"])(Object(s["a"])({},Object(c["c"])(["products","category"])),{},{showProducts:function(){switch(this.category){case"bed":case"curtain":return this.filterProduct(this.category);case"chair":return this.filterProduct(this.category,"sofa");case"case":return this.filterProduct(this.category,"table");default:return this.products}}}),methods:Object(s["a"])(Object(s["a"])({},Object(c["b"])(["setMsg","setProducts","setPagination","setTempProduct","toggleProductPage"])),{},{getData:function(){var t=this,a=this.$loading.show();Object(_["i"])().then((function(i){t.setProducts(Object(v["a"])(i.data.data).map((function(t){var a=t;return a.quantity=1,a.isLoading=!1,a}))),t.pagination=i.data.meta.pagination,a.hide()})).catch((function(t){console.error(t)}))},showDetail:function(t){var a=this,i=t.target.parentNode.parentNode.dataset||t.target.parentNode.dataset,n=i.id;if(n){this.toggleProductPage();var e=this.$loading.show({container:this.$refs.product,isFullPage:!1});Object(_["p"])(n).then((function(t){a.setTempProduct(Object(s["a"])(Object(s["a"])({},t.data.data),{},{quantity:1})),e.hide()}))}},getShopcartQuantity:function(){var t=this;Object(_["o"])().then((function(a){t.shopcart.quantity=a.data.meta.pagination.total}))},countQuantity:function(t,a){"m"===a?this.products[t].quantity>1&&(this.products[t].quantity-=1):"p"===a&&(this.products[t].quantity+=1)},addToCart:function(t,a,i){var n=this;this.products[t].isLoading=!0,a&&i&&Object(_["c"])(a,i).then((function(){n.getShopcartQuantity(),n.products[t].isLoading=!1})).catch((function(a){n.setMsg({msg:a.response.data.errors[0],type:!1}),n.products[t].isLoading=!1}))},filterProduct:function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return a.length>1?this.products.filter((function(t){var i=t.category.toLowerCase();return i.indexOf(a[0])>-1||i.indexOf(a[1])>-1})):this.products.filter((function(t){return t.category.toLowerCase().indexOf(a[0])>-1}))}})},C=y,m=(i("958b"),Object(p["a"])(C,f,h,!1,null,"73fa4aad",null)),O=m.exports,k={components:{categoryList:g,productList:O},computed:Object(s["a"])({},Object(c["c"])(["sticky"]))},P=k,j=(i("2afb"),Object(p["a"])(P,n,e,!1,null,"5225e781",null));a["default"]=j.exports},eed0:function(t,a,i){},ff7c:function(t,a,i){"use strict";var n=i("1b61"),e=i.n(n);e.a}}]);
//# sourceMappingURL=chunk-d6b809f2.d68b3117.js.map