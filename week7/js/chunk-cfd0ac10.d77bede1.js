(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cfd0ac10"],{"036f":function(t,a,i){},1799:function(t,a,i){"use strict";var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("nav",{staticClass:"pagination is-centered",attrs:{role:"navigation","aria-label":"pagination"}},[i("ul",{staticClass:"pagination-list"},[i("li",[i("a",{staticClass:"pagination-previous",attrs:{id:"prev",disabled:t.firstPage},on:{click:function(a){return t.changePage("m")}}},[t._v("«")])]),t._l(t.pagination.total_pages,(function(a){return i("li",{key:a,on:{click:function(i){return t.goToPage(a)}}},[i("a",{staticClass:"pagination-link",class:{"is-current":t.cur(a)}},[t._v(t._s(a))])])})),i("li",[i("a",{staticClass:"pagination-next",attrs:{id:"next",disabled:t.lastPage},on:{click:function(a){return t.changePage("p")}}},[t._v("»")])])],2)])},s=[],e={name:"pagination",props:{pagination:Object},computed:{cur:function(){var t=this;return function(a){return a===t.pagination.current_page}},firstPage:function(){return 1===this.pagination.current_page},lastPage:function(){return this.pagination.current_page===this.pagination.total_pages}},methods:{changePage:function(t){var a=this.pagination.current_page,i=this.pagination.total_pages;"p"===t?a<i&&this.$emit("update:pagination",this.pagination.current_page+=1):"m"===t&&a>1&&this.$emit("update:pagination",this.pagination.current_page-=1)},goToPage:function(t){this.$emit("update:pagination",this.pagination.current_page=t)}}},c=e,r=(i("a2d5"),i("2877")),o=Object(r["a"])(c,n,s,!1,null,"5aa98eaf",null);a["a"]=o.exports},"225a":function(t,a,i){},"2acf":function(t,a,i){"use strict";var n=i("ee05"),s=i.n(n);s.a},"323a":function(t,a,i){},"599b":function(t,a,i){"use strict";var n=i("225a"),s=i.n(n);s.a},a2d5:function(t,a,i){"use strict";var n=i("323a"),s=i.n(n);s.a},c975:function(t,a,i){"use strict";var n=i("23e7"),s=i("4d64").indexOf,e=i("a640"),c=i("ae40"),r=[].indexOf,o=!!r&&1/[1].indexOf(1,-0)<0,u=e("indexOf"),d=c("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:o||!u||!d},{indexOf:function(t){return o?r.apply(this,arguments)||0:s(this,t,arguments.length>1?arguments[1]:void 0)}})},d81d:function(t,a,i){"use strict";var n=i("23e7"),s=i("b727").map,e=i("1dde"),c=i("ae40"),r=e("map"),o=c("map");n({target:"Array",proto:!0,forced:!r||!o},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},e3ac:function(t,a,i){"use strict";var n=i("036f"),s=i.n(n);s.a},e6dc:function(t,a,i){"use strict";i.r(a);var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"productPage",attrs:{id:"productPage"}},[i("categoryList",{class:{sticky:t.sticky}}),i("productList",{class:{sticky:t.sticky}})],1)},s=[],e=i("5530"),c=i("2f62"),r=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"category",attrs:{id:"category"}},[i("div",{staticClass:"category-container"},[i("ul",{staticClass:"category-list"},[i("li",[i("button",{on:{click:function(a){return t.setCategory("")}}},[t._v("全部商品")])]),i("li",[i("button",{on:{click:function(a){return t.setCategory("bed")}}},[t._v("床架／床墊")])]),i("li",[i("button",{on:{click:function(a){return t.setCategory("chair")}}},[t._v("椅子／沙發")])]),i("li",[i("button",{on:{click:function(a){return t.setCategory("case")}}},[t._v("櫃子／桌子")])]),i("li",[i("button",{on:{click:function(a){return t.setCategory("curtain")}}},[t._v("地毯／窗簾")])])])])])},o=[],u={methods:Object(e["a"])({},Object(c["b"])(["setCategory"]))},d=u,l=(i("e3ac"),i("2877")),p=Object(l["a"])(d,r,o,!1,null,"e94a06e0",null),g=p.exports,f=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"product-list",attrs:{id:"product-list"}},[i("div",{staticClass:"container is-fluid"},[i("div",{staticClass:"columns is-multiline is-marginless mt-5 is-variable is-1-fullhd is-2-desktop is-desktop"},t._l(t.showProducts,(function(a,n){return i("div",{key:n,staticClass:"column is-3-fullhd is-4-widescreen is-5-desktop-only is-6-tablet-only is-10-mobile",attrs:{"data-id":a.id}},[i("div",{staticClass:"card is-relative has-text-left"},[i("div",{staticClass:"card-image columns is-marginless is-cus-centered"},[i("div",{staticClass:"is-pulled-left is-clearfix is-category"},[t._v(t._s(a.category))]),i("figure",{staticClass:"image is-128x128"},[i("img",{staticClass:"is-rounded",attrs:{src:a.imageUrl[0]}})])]),i("div",{staticClass:"card-content is-paddingless px-2 py-5"},[i("div",{staticClass:"title is-4",attrs:{title:a.title}},[t._v(t._s(a.title))]),i("div",{staticClass:"content is-marginless mb-auto"},[t._v(t._s(t._f("hideContent")(a.content)))]),i("div",{staticClass:"content has-text-right is-marginless"},[i("router-link",{staticClass:"descript-link",attrs:{to:"/product/"+a.id}},[t._v("查看更多 »")])],1),i("div",{staticClass:"content is-marginless"},[a.price?i("div",{staticClass:"price in-bottom"},[t._v(t._s(t._f("cash")(a.price))),i("span",{class:{strike:a.price}},[t._v(t._s(t._f("cash")(a.origin_price)))])]):t._e()]),i("div",{staticClass:"card-footer"},[i("div",{staticClass:"field has-addons has-addons-centered mt-1"},[i("div",{staticClass:"control"},[i("button",{staticClass:"button is-left",on:{click:function(a){return t.countQuantity(n,"m")}}},[t._v("−")])]),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:a.quantity,expression:"item.quantity"}],staticClass:"input has-text-centered",attrs:{type:"number"},domProps:{value:a.quantity},on:{change:function(a){return t.updateCartData(n)},input:function(i){i.target.composing||t.$set(a,"quantity",i.target.value)}}})]),i("div",{staticClass:"control"},[i("button",{staticClass:"button is-right",on:{click:function(a){return t.countQuantity(n,"p")}}},[t._v("+")])]),i("button",{staticClass:"button is-cus-primary addCart",class:{"is-loading":a.isLoading},on:{click:function(i){return t.addToCart(n,a.id,a.quantity)}}},[t._v("加入購物車")])])])])])])})),0),t.pagination.current_page?[i("pagination",{attrs:{pagination:t.pagination}})]:t._e(),i("router-link",{staticClass:"shop-cart",attrs:{to:"/shopcart"}},[i("div",{staticClass:"shop-container"},[t.shopcart.quantity?i("div",{staticClass:"cart-count"},[t._v(t._s(t.shopcart.quantity))]):t._e(),i("font-awesome-icon",{attrs:{icon:"shopping-cart"}}),i("div",{staticClass:"txt"},[t._v("購物車")])],1)])],2)])},h=[],v=(i("4de4"),i("c975"),i("d81d"),i("2909")),m=i("1799"),y=i("2803"),_={components:{productCategories:g,pagination:m["a"]},data:function(){return{id:null,pageOpen:!1,shopcart:{quantity:null},pagination:{}}},created:function(){this.getData(),this.getShopcartQuantity()},watch:{"pagination.current_page":{handler:function(){var t=this,a=this.pagination.current_page,i=this.$loading.show();Object(y["k"])(a).then((function(a){t.setProducts(Object(v["a"])(a.data.data).map((function(t){var a=t;return a.quantity=1,a.isLoading=!1,a}))),i.hide()}))}}},computed:Object(e["a"])(Object(e["a"])({},Object(c["c"])(["products","category"])),{},{showProducts:function(){switch(this.category){case"bed":case"curtain":return this.filterProduct(this.category);case"chair":return this.filterProduct(this.category,"sofa");case"case":return this.filterProduct(this.category,"table");default:return this.products}}}),methods:Object(e["a"])(Object(e["a"])({},Object(c["b"])(["setMsg","setProducts","setPagination","setTempProduct","toggleProductPage"])),{},{getData:function(){var t=this,a=this.$loading.show();Object(y["k"])().then((function(i){t.setProducts(Object(v["a"])(i.data.data).map((function(t){var a=t;return a.quantity=1,a.isLoading=!1,a}))),t.pagination=i.data.meta.pagination,a.hide()})).catch((function(t){console.error(t)}))},showDetail:function(t){var a=this,i=t.target.parentNode.parentNode.dataset||t.target.parentNode.dataset,n=i.id;if(n){this.toggleProductPage();var s=this.$loading.show({container:this.$refs.product,isFullPage:!1});Object(y["r"])(n).then((function(t){a.setTempProduct(Object(e["a"])(Object(e["a"])({},t.data.data),{},{quantity:1})),s.hide()}))}},getShopcartQuantity:function(){var t=this;Object(y["q"])().then((function(a){t.shopcart.quantity=a.data.meta.pagination.total}))},countQuantity:function(t,a){"m"===a?this.products[t].quantity>1&&(this.products[t].quantity-=1):"p"===a&&(this.products[t].quantity+=1)},addToCart:function(t,a,i){var n=this;this.products[t].isLoading=!0,a&&i&&Object(y["c"])(a,i).then((function(){n.getShopcartQuantity(),n.products[t].isLoading=!1})).catch((function(a){n.setMsg({msg:a.response.data.errors[0],type:!1}),n.products[t].isLoading=!1}))},filterProduct:function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return a.length>1?this.products.filter((function(t){var i=t.category.toLowerCase();return i.indexOf(a[0])>-1||i.indexOf(a[1])>-1})):this.products.filter((function(t){return t.category.toLowerCase().indexOf(a[0])>-1}))}})},b=_,C=(i("599b"),Object(l["a"])(b,f,h,!1,null,"604ca8dc",null)),O=C.exports,k={components:{categoryList:g,productList:O},computed:Object(e["a"])({},Object(c["c"])(["sticky"]))},P=k,j=(i("2acf"),Object(l["a"])(P,n,s,!1,null,"d6634d1a",null));a["default"]=j.exports},ee05:function(t,a,i){}}]);
//# sourceMappingURL=chunk-cfd0ac10.d77bede1.js.map