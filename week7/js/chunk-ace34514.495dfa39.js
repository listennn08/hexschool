(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ace34514"],{"13d5":function(t,i,s){"use strict";var e=s("23e7"),r=s("d58f").left,n=s("a640"),c=s("ae40"),a=n("reduce"),o=c("reduce",{1:0});e({target:"Array",proto:!0,forced:!a||!o},{reduce:function(t){return r(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"1e10":function(t,i,s){"use strict";var e=s("7476"),r=s.n(e);r.a},7476:function(t,i,s){},8647:function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"container is-fluid"},[t.products&&t.products.length>0?s("div",{staticClass:"container"},[s("button",{ref:"removeAllContainer",staticClass:"button is-text is-outlined is-pulled-right my-2 removeAll",on:{click:function(i){return t.deleteCartData()}}},[t._v("刪除所有商品")]),s("table",{staticClass:"table is-fullwidth"},[t._m(0),s("tbody",{ref:"preivew"},t._l(t.products,(function(i,e){return s("tr",{key:i.product.id,staticClass:"has-text-justified"},[s("td",{attrs:{scoped:"row"}},[t._v(t._s(e+1))]),s("td",[s("figure",{staticClass:"image is-128x128"},[s("img",{attrs:{src:i.product.imageUrl[0]}})])]),s("td",[s("div",{staticClass:"item-name"},[t._v(t._s(t._f("hideTitle")(i.product.title)))])]),s("td",[i.product.price?s("div",{staticClass:"price"},[t._v(t._s(t._f("cash")(i.product.price))),s("span",{class:{strike:i.product.price}},[t._v(t._s(t._f("cash")(i.product.origin_price)))])]):t._e()]),s("td",[s("div",{staticClass:"field has-addons has-addons-centered"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button is-left is-small",on:{click:function(i){return t.countQuantity(e,"m")}}},[t._v("−")])]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:i.quantity,expression:"item.quantity"}],staticClass:"input has-text-centered is-small",attrs:{type:"number"},domProps:{value:i.quantity},on:{change:function(i){return t.updateCartData(e)},input:function(s){s.target.composing||t.$set(i,"quantity",s.target.value)}}})]),s("div",{staticClass:"control"},[s("button",{staticClass:"button is-right is-small",on:{click:function(i){return t.countQuantity(e,"p")}}},[t._v("+")])])])]),s("td",{staticClass:"item-total"},[t._v(t._s(t._f("cash")(t.getItemTotal(e))))]),s("td",[s("button",{staticClass:"button is-text is-underlineless remove",class:{"is-loading":i.removing},on:{click:function(i){return t.deleteCartData(e)}}},[t._v("×")])])])})),0),s("tr",{staticClass:"total"},[s("td",[t._v("小計")]),s("td",{attrs:{colspan:"4"}}),s("td",[t._v(t._s(t._f("cash")(t.countAll)))]),s("td")])]),s("div",{staticClass:"shopcart-checkout buttons is-pulled-right"},[s("button",{staticClass:"button is-outline is-cus-primary continueshop",on:{click:function(i){return t.$router.push("products")}}},[t._v("‹‹ 繼續購物")]),s("button",{staticClass:"button is-cus-primary checkout",on:{click:function(i){return t.$router.push("checkout")}}},[t._v("去結帳 ››")])])]):s("div",{staticClass:"container"},[s("div",{staticClass:"noItemAlert"},[t._v("還沒有把喜愛的商品加入購物車唷 趕快去購物吧！")]),s("div",{staticClass:"shopcart-checkout"},[s("button",{staticClass:"button is-cus-primary continueshop",on:{click:function(i){return t.$router.push("products")}}},[t._v("‹‹繼續購物")])])])])},r=[function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("thead",[s("tr",[s("th",[t._v("編號")]),s("th",[t._v("圖示")]),s("th",[t._v("產品名稱")]),s("th",[t._v("售價")]),s("th",[t._v("購買數量")]),s("th",[t._v("總價")]),s("th",[t._v("移除")])])])}],n=(s("d81d"),s("13d5"),s("a434"),s("2909")),c=s("2803"),a={data:function(){return{products:[],productCheck:[]}},created:function(){this.getShopCartData()},computed:{countAll:function(){return this.products.reduce((function(t,i){return t+i.quantity*(i.product.price?i.product.price:i.product.origin_price)}),0)}},methods:{getShopCartData:function(){var t=this,i=this.$loading.show();Object(c["p"])().then((function(s){t.products=Object(n["a"])(s.data.data).map((function(t){var i=t;return i.removing=!1,i})),i.hide()}))},countQuantity:function(t,i){"m"===i?this.products[t].quantity>1&&(this.products[t].quantity-=1):"p"===i&&(this.products[t].quantity+=1),this.updateCartData(t)},updateCartData:function(t){Object(c["v"])(this.products[t].product.id,this.products[t].quantity)},deleteCartData:function(t){var i=this;if(t||0===t)this.products[t].removing=!0,Object(c["h"])(this.products[t].product.id).then((function(){i.products.splice(t,1),i.products[t].removing=!1}));else{var s=this.$loading.show({container:this.$refs.removeAllContainer,isFullPage:!1});Object(c["h"])().then((function(){i.products=[],s.hide()}))}},getItemTotal:function(t){return this.products[t].quantity*(this.products[t].product.price?this.products[t].product.price:this.products[t].product.origin_price)}}},o=a,u=(s("1e10"),s("2877")),d=Object(u["a"])(o,e,r,!1,null,"1b303ad2",null);i["default"]=d.exports},d58f:function(t,i,s){var e=s("1c0b"),r=s("7b0b"),n=s("44ad"),c=s("50c4"),a=function(t){return function(i,s,a,o){e(s);var u=r(i),d=n(u),l=c(u.length),p=t?l-1:0,h=t?-1:1;if(a<2)while(1){if(p in d){o=d[p],p+=h;break}if(p+=h,t?p<0:l<=p)throw TypeError("Reduce of empty array with no initial value")}for(;t?p>=0:l>p;p+=h)p in d&&(o=s(o,d[p],p,u));return o}};t.exports={left:a(!1),right:a(!0)}},d81d:function(t,i,s){"use strict";var e=s("23e7"),r=s("b727").map,n=s("1dde"),c=s("ae40"),a=n("map"),o=c("map");e({target:"Array",proto:!0,forced:!a||!o},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-ace34514.495dfa39.js.map